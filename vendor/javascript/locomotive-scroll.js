function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var i=0;i<e.length;i++){var s=e[i];s.enumerable=s.enumerable||false;s.configurable=true;"value"in s&&(s.writable=true);Object.defineProperty(t,s.key,s)}}function _createClass(t,e,i){e&&_defineProperties(t.prototype,e);i&&_defineProperties(t,i);return t}function _defineProperty(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:true,configurable:true,writable:true}):t[e]=i;return t}function ownKeys(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})));i.push.apply(i,s)}return i}function _objectSpread2(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(i),true).forEach((function(e){_defineProperty(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):ownKeys(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}function _inherits(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:true,configurable:true}});e&&_setPrototypeOf(t,e)}function _getPrototypeOf(t){_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(t){return t.__proto__||Object.getPrototypeOf(t)};return _getPrototypeOf(t)}function _setPrototypeOf(t,e){_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(t,e){t.__proto__=e;return t};return _setPrototypeOf(t,e)}function _isNativeReflectConstruct(){if("undefined"===typeof Reflect||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if("function"===typeof Proxy)return true;try{Date.prototype.toString.call(Reflect.construct(Date,[],(function(){})));return true}catch(t){return false}}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _possibleConstructorReturn(t,e){return!e||"object"!==typeof e&&"function"!==typeof e?_assertThisInitialized(t):e}function _createSuper(t){var e=_isNativeReflectConstruct();return function _createSuperInternal(){var i,s=_getPrototypeOf(t);if(e){var n=_getPrototypeOf(this).constructor;i=Reflect.construct(s,arguments,n)}else i=s.apply(this,arguments);return _possibleConstructorReturn(this,i)}}function _superPropBase(t,e){while(!Object.prototype.hasOwnProperty.call(t,e)){t=_getPrototypeOf(t);if(null===t)break}return t}function _get(t,e,i){_get="undefined"!==typeof Reflect&&Reflect.get?Reflect.get:function _get(t,e,i){var s=_superPropBase(t,e);if(s){var n=Object.getOwnPropertyDescriptor(s,e);return n.get?n.get.call(i):n.value}};return _get(t,e,i||t)}function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_unsupportedIterableToArray(t,e)||_nonIterableRest()}function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _iterableToArray(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function _iterableToArrayLimit(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var i=[];var s=true;var n=false;var r=void 0;try{for(var o,l=t[Symbol.iterator]();!(s=(o=l.next()).done);s=true){i.push(o.value);if(e&&i.length===e)break}}catch(t){n=true;r=t}finally{try{s||null==l.return||l.return()}finally{if(n)throw r}}return i}}function _unsupportedIterableToArray(t,e){if(t){if("string"===typeof t)return _arrayLikeToArray(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);return"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,s=new Array(e);i<e;i++)s[i]=t[i];return s}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var t={el:document,name:"scroll",offset:[0,0],repeat:false,smooth:false,initPosition:{x:0,y:0},direction:"vertical",gestureDirection:"vertical",reloadOnContextChange:false,lerp:.1,class:"is-inview",scrollbarContainer:false,scrollbarClass:"c-scrollbar",scrollingClass:"has-scroll-scrolling",draggingClass:"has-scroll-dragging",smoothClass:"has-scroll-smooth",initClass:"has-scroll-init",getSpeed:false,getDirection:false,scrollFromAnywhere:false,multiplier:1,firefoxMultiplier:50,touchMultiplier:2,resetNativeScroll:true,tablet:{smooth:false,direction:"vertical",gestureDirection:"vertical",breakpoint:1024},smartphone:{smooth:false,direction:"vertical",gestureDirection:"vertical"}};var e=function(){function _default(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,_default);Object.assign(this,t,e);this.smartphone=t.smartphone;e.smartphone&&Object.assign(this.smartphone,e.smartphone);this.tablet=t.tablet;e.tablet&&Object.assign(this.tablet,e.tablet);this.namespace="locomotive";this.html=document.documentElement;this.windowHeight=window.innerHeight;this.windowWidth=window.innerWidth;this.windowMiddle={x:this.windowWidth/2,y:this.windowHeight/2};this.els={};this.currentElements={};this.listeners={};this.hasScrollTicking=false;this.hasCallEventSet=false;this.checkScroll=this.checkScroll.bind(this);this.checkResize=this.checkResize.bind(this);this.checkEvent=this.checkEvent.bind(this);this.instance={scroll:{x:0,y:0},limit:{x:this.html.offsetWidth,y:this.html.offsetHeight},currentElements:this.currentElements};this.isMobile?this.isTablet?this.context="tablet":this.context="smartphone":this.context="desktop";this.isMobile&&(this.direction=this[this.context].direction);"horizontal"===this.direction?this.directionAxis="x":this.directionAxis="y";this.getDirection&&(this.instance.direction=null);this.getDirection&&(this.instance.speed=0);this.html.classList.add(this.initClass);window.addEventListener("resize",this.checkResize,false)}_createClass(_default,[{key:"init",value:function init(){this.initEvents()}},{key:"checkScroll",value:function checkScroll(){this.dispatchScroll()}},{key:"checkResize",value:function checkResize(){var t=this;if(!this.resizeTick){this.resizeTick=true;requestAnimationFrame((function(){t.resize();t.resizeTick=false}))}}},{key:"resize",value:function resize(){}},{key:"checkContext",value:function checkContext(){if(this.reloadOnContextChange){this.isMobile=/Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1||this.windowWidth<this.tablet.breakpoint;this.isTablet=this.isMobile&&this.windowWidth>=this.tablet.breakpoint;var t=this.context;this.isMobile?this.isTablet?this.context="tablet":this.context="smartphone":this.context="desktop";if(t!=this.context){var e="desktop"==t?this.smooth:this[t].smooth;var i="desktop"==this.context?this.smooth:this[this.context].smooth;e!=i&&window.location.reload()}}}},{key:"initEvents",value:function initEvents(){var t=this;this.scrollToEls=this.el.querySelectorAll("[data-".concat(this.name,"-to]"));this.setScrollTo=this.setScrollTo.bind(this);this.scrollToEls.forEach((function(e){e.addEventListener("click",t.setScrollTo,false)}))}},{key:"setScrollTo",value:function setScrollTo(t){t.preventDefault();this.scrollTo(t.currentTarget.getAttribute("data-".concat(this.name,"-href"))||t.currentTarget.getAttribute("href"),{offset:t.currentTarget.getAttribute("data-".concat(this.name,"-offset"))})}},{key:"addElements",value:function addElements(){}},{key:"detectElements",value:function detectElements(t){var e=this;var i=this.instance.scroll.y;var s=i+this.windowHeight;var n=this.instance.scroll.x;var r=n+this.windowWidth;Object.entries(this.els).forEach((function(o){var l=_slicedToArray(o,2),a=l[0],c=l[1];!c||c.inView&&!t||("horizontal"===e.direction?r>=c.left&&n<c.right&&e.setInView(c,a):s>=c.top&&i<c.bottom&&e.setInView(c,a));if(c&&c.inView)if("horizontal"===e.direction){var h=c.right-c.left;c.progress=(e.instance.scroll.x-(c.left-e.windowWidth))/(h+e.windowWidth);(r<c.left||n>c.right)&&e.setOutOfView(c,a)}else{var u=c.bottom-c.top;c.progress=(e.instance.scroll.y-(c.top-e.windowHeight))/(u+e.windowHeight);(s<c.top||i>c.bottom)&&e.setOutOfView(c,a)}}));this.hasScrollTicking=false}},{key:"setInView",value:function setInView(t,e){this.els[e].inView=true;t.el.classList.add(t.class);this.currentElements[e]=t;if(t.call&&this.hasCallEventSet){this.dispatchCall(t,"enter");t.repeat||(this.els[e].call=false)}}},{key:"setOutOfView",value:function setOutOfView(t,e){var i=this;this.els[e].inView=false;Object.keys(this.currentElements).forEach((function(t){t===e&&delete i.currentElements[t]}));t.call&&this.hasCallEventSet&&this.dispatchCall(t,"exit");t.repeat&&t.el.classList.remove(t.class)}},{key:"dispatchCall",value:function dispatchCall(t,e){this.callWay=e;this.callValue=t.call.split(",").map((function(t){return t.trim()}));this.callObj=t;1==this.callValue.length&&(this.callValue=this.callValue[0]);var i=new Event(this.namespace+"call");this.el.dispatchEvent(i)}},{key:"dispatchScroll",value:function dispatchScroll(){var t=new Event(this.namespace+"scroll");this.el.dispatchEvent(t)}},{key:"setEvents",value:function setEvents(t,e){this.listeners[t]||(this.listeners[t]=[]);var i=this.listeners[t];i.push(e);1===i.length&&this.el.addEventListener(this.namespace+t,this.checkEvent,false);if("call"===t){this.hasCallEventSet=true;this.detectElements(true)}}},{key:"unsetEvents",value:function unsetEvents(t,e){if(this.listeners[t]){var i=this.listeners[t];var s=i.indexOf(e);if(!(s<0)){i.splice(s,1);0===i.index&&this.el.removeEventListener(this.namespace+t,this.checkEvent,false)}}}},{key:"checkEvent",value:function checkEvent(t){var e=this;var i=t.type.replace(this.namespace,"");var s=this.listeners[i];s&&0!==s.length&&s.forEach((function(t){switch(i){case"scroll":return t(e.instance);case"call":return t(e.callValue,e.callWay,e.callObj);default:return t()}}))}},{key:"startScroll",value:function startScroll(){}},{key:"stopScroll",value:function stopScroll(){}},{key:"setScroll",value:function setScroll(t,e){this.instance.scroll={x:0,y:0}}},{key:"destroy",value:function destroy(){var t=this;window.removeEventListener("resize",this.checkResize,false);Object.keys(this.listeners).forEach((function(e){t.el.removeEventListener(t.namespace+e,t.checkEvent,false)}));this.listeners={};this.scrollToEls.forEach((function(e){e.removeEventListener("click",t.setScrollTo,false)}));this.html.classList.remove(this.initClass)}}]);return _default}();var i="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};function createCommonjsModule(t,e){return e={exports:{}},t(e,e.exports),e.exports}var s=createCommonjsModule((function(t,e){(function(){function polyfill(){var t=window;var e=document;if(!("scrollBehavior"in e.documentElement.style)||true===t.__forceSmoothScrollPolyfill__){var i=t.HTMLElement||t.Element;var s=468;var n={scroll:t.scroll||t.scrollTo,scrollBy:t.scrollBy,elementScroll:i.prototype.scroll||scrollElement,scrollIntoView:i.prototype.scrollIntoView};var r=t.performance&&t.performance.now?t.performance.now.bind(t.performance):Date.now;
/**
     * indicates if a the current browser is made by Microsoft
     * @method isMicrosoftBrowser
     * @param {String} userAgent
     * @returns {Boolean}
     */var o=isMicrosoftBrowser(t.navigator.userAgent)?1:0;
/**
     * changes scroll position inside an element
     * @method scrollElement
     * @param {Number} x
     * @param {Number} y
     * @returns {undefined}
     */t.scroll=t.scrollTo=function(){void 0!==arguments[0]&&(true!==shouldBailOut(arguments[0])?smoothScroll.call(t,e.body,void 0!==arguments[0].left?~~arguments[0].left:t.scrollX||t.pageXOffset,void 0!==arguments[0].top?~~arguments[0].top:t.scrollY||t.pageYOffset):n.scroll.call(t,void 0!==arguments[0].left?arguments[0].left:"object"!==typeof arguments[0]?arguments[0]:t.scrollX||t.pageXOffset,void 0!==arguments[0].top?arguments[0].top:void 0!==arguments[1]?arguments[1]:t.scrollY||t.pageYOffset))};t.scrollBy=function(){void 0!==arguments[0]&&(shouldBailOut(arguments[0])?n.scrollBy.call(t,void 0!==arguments[0].left?arguments[0].left:"object"!==typeof arguments[0]?arguments[0]:0,void 0!==arguments[0].top?arguments[0].top:void 0!==arguments[1]?arguments[1]:0):smoothScroll.call(t,e.body,~~arguments[0].left+(t.scrollX||t.pageXOffset),~~arguments[0].top+(t.scrollY||t.pageYOffset)))};i.prototype.scroll=i.prototype.scrollTo=function(){if(void 0!==arguments[0])if(true!==shouldBailOut(arguments[0])){var t=arguments[0].left;var e=arguments[0].top;smoothScroll.call(this,this,"undefined"===typeof t?this.scrollLeft:~~t,"undefined"===typeof e?this.scrollTop:~~e)}else{if("number"===typeof arguments[0]&&void 0===arguments[1])throw new SyntaxError("Value could not be converted");n.elementScroll.call(this,void 0!==arguments[0].left?~~arguments[0].left:"object"!==typeof arguments[0]?~~arguments[0]:this.scrollLeft,void 0!==arguments[0].top?~~arguments[0].top:void 0!==arguments[1]?~~arguments[1]:this.scrollTop)}};i.prototype.scrollBy=function(){void 0!==arguments[0]&&(true!==shouldBailOut(arguments[0])?this.scroll({left:~~arguments[0].left+this.scrollLeft,top:~~arguments[0].top+this.scrollTop,behavior:arguments[0].behavior}):n.elementScroll.call(this,void 0!==arguments[0].left?~~arguments[0].left+this.scrollLeft:~~arguments[0]+this.scrollLeft,void 0!==arguments[0].top?~~arguments[0].top+this.scrollTop:~~arguments[1]+this.scrollTop))};i.prototype.scrollIntoView=function(){if(true!==shouldBailOut(arguments[0])){var i=findScrollableParent(this);var s=i.getBoundingClientRect();var r=this.getBoundingClientRect();if(i!==e.body){smoothScroll.call(this,i,i.scrollLeft+r.left-s.left,i.scrollTop+r.top-s.top);"fixed"!==t.getComputedStyle(i).position&&t.scrollBy({left:s.left,top:s.top,behavior:"smooth"})}else t.scrollBy({left:r.left,top:r.top,behavior:"smooth"})}else n.scrollIntoView.call(this,void 0===arguments[0]||arguments[0])}}function isMicrosoftBrowser(t){var e=["MSIE ","Trident/","Edge/"];return new RegExp(e.join("|")).test(t)}function scrollElement(t,e){this.scrollLeft=t;this.scrollTop=e}
/**
     * returns result of applying ease math function to a number
     * @method ease
     * @param {Number} k
     * @returns {Number}
     */function ease(t){return.5*(1-Math.cos(Math.PI*t))}
/**
     * indicates if a smooth behavior should be applied
     * @method shouldBailOut
     * @param {Number|Object} firstArg
     * @returns {Boolean}
     */function shouldBailOut(t){if(null===t||"object"!==typeof t||void 0===t.behavior||"auto"===t.behavior||"instant"===t.behavior)return true;if("object"===typeof t&&"smooth"===t.behavior)return false;throw new TypeError("behavior member of ScrollOptions "+t.behavior+" is not a valid value for enumeration ScrollBehavior.")}
/**
     * indicates if an element has scrollable space in the provided axis
     * @method hasScrollableSpace
     * @param {Node} el
     * @param {String} axis
     * @returns {Boolean}
     */function hasScrollableSpace(t,e){return"Y"===e?t.clientHeight+o<t.scrollHeight:"X"===e?t.clientWidth+o<t.scrollWidth:void 0}
/**
     * indicates if an element has a scrollable overflow property in the axis
     * @method canOverflow
     * @param {Node} el
     * @param {String} axis
     * @returns {Boolean}
     */function canOverflow(e,i){var s=t.getComputedStyle(e,null)["overflow"+i];return"auto"===s||"scroll"===s}
/**
     * indicates if an element can be scrolled in either axis
     * @method isScrollable
     * @param {Node} el
     * @param {String} axis
     * @returns {Boolean}
     */function isScrollable(t){var e=hasScrollableSpace(t,"Y")&&canOverflow(t,"Y");var i=hasScrollableSpace(t,"X")&&canOverflow(t,"X");return e||i}
/**
     * finds scrollable parent of an element
     * @method findScrollableParent
     * @param {Node} el
     * @returns {Node} el
     */function findScrollableParent(t){while(t!==e.body&&false===isScrollable(t))t=t.parentNode||t.host;return t}
/**
     * self invoked function that, given a context, steps through scrolling
     * @method step
     * @param {Object} context
     * @returns {undefined}
     */function step(e){var i=r();var n;var o;var l;var a=(i-e.startTime)/s;a=a>1?1:a;n=ease(a);o=e.startX+(e.x-e.startX)*n;l=e.startY+(e.y-e.startY)*n;e.method.call(e.scrollable,o,l);o===e.x&&l===e.y||t.requestAnimationFrame(step.bind(t,e))}
/**
     * scrolls window or element with a smooth behavior
     * @method smoothScroll
     * @param {Object|Node} el
     * @param {Number} x
     * @param {Number} y
     * @returns {undefined}
     */function smoothScroll(i,s,o){var l;var a;var c;var h;var u=r();if(i===e.body){l=t;a=t.scrollX||t.pageXOffset;c=t.scrollY||t.pageYOffset;h=n.scroll}else{l=i;a=i.scrollLeft;c=i.scrollTop;h=scrollElement}step({scrollable:l,method:h,startTime:u,startX:a,startY:c,x:s,y:o})}}t.exports={polyfill:polyfill}})()}));s.polyfill;var n=function(t){_inherits(_default,t);var e=_createSuper(_default);function _default(){var t;var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,_default);t=e.call(this,i);if(t.resetNativeScroll){history.scrollRestoration&&(history.scrollRestoration="manual");window.scrollTo(0,0)}window.addEventListener("scroll",t.checkScroll,false);if(void 0===window.smoothscrollPolyfill){window.smoothscrollPolyfill=s;window.smoothscrollPolyfill.polyfill()}return t}_createClass(_default,[{key:"init",value:function init(){this.instance.scroll.y=window.pageYOffset;this.addElements();this.detectElements();_get(_getPrototypeOf(_default.prototype),"init",this).call(this)}},{key:"checkScroll",value:function checkScroll(){var t=this;_get(_getPrototypeOf(_default.prototype),"checkScroll",this).call(this);this.getDirection&&this.addDirection();if(this.getSpeed){this.addSpeed();this.speedTs=Date.now()}this.instance.scroll.y=window.pageYOffset;if(Object.entries(this.els).length&&!this.hasScrollTicking){requestAnimationFrame((function(){t.detectElements()}));this.hasScrollTicking=true}}},{key:"addDirection",value:function addDirection(){window.pageYOffset>this.instance.scroll.y?"down"!==this.instance.direction&&(this.instance.direction="down"):window.pageYOffset<this.instance.scroll.y&&"up"!==this.instance.direction&&(this.instance.direction="up")}},{key:"addSpeed",value:function addSpeed(){window.pageYOffset!=this.instance.scroll.y?this.instance.speed=(window.pageYOffset-this.instance.scroll.y)/Math.max(1,Date.now()-this.speedTs):this.instance.speed=0}},{key:"resize",value:function resize(){if(Object.entries(this.els).length){this.windowHeight=window.innerHeight;this.updateElements()}}},{key:"addElements",value:function addElements(){var t=this;this.els={};var e=this.el.querySelectorAll("[data-"+this.name+"]");e.forEach((function(e,i){e.getBoundingClientRect();var s=e.dataset[t.name+"Class"]||t.class;var n="string"===typeof e.dataset[t.name+"Id"]?e.dataset[t.name+"Id"]:i;var r;var o;var l="string"===typeof e.dataset[t.name+"Offset"]?e.dataset[t.name+"Offset"].split(","):t.offset;var a=e.dataset[t.name+"Repeat"];var c=e.dataset[t.name+"Call"];var h=e.dataset[t.name+"Target"];var u;u=void 0!==h?document.querySelector("".concat(h)):e;var d=u.getBoundingClientRect();r=d.top+t.instance.scroll.y;o=d.left+t.instance.scroll.x;var f=r+u.offsetHeight;var p=o+u.offsetWidth;a="false"!=a&&(void 0!=a||t.repeat);var v=t.getRelativeOffset(l);r+=v[0];f-=v[1];var m={el:e,targetEl:u,id:n,class:s,top:r,bottom:f,left:o,right:p,offset:l,progress:0,repeat:a,inView:false,call:c};t.els[n]=m;e.classList.contains(s)&&t.setInView(t.els[n],n)}))}},{key:"updateElements",value:function updateElements(){var t=this;Object.entries(this.els).forEach((function(e){var i=_slicedToArray(e,2),s=i[0],n=i[1];var r=n.targetEl.getBoundingClientRect().top+t.instance.scroll.y;var o=r+n.targetEl.offsetHeight;var l=t.getRelativeOffset(n.offset);t.els[s].top=r+l[0];t.els[s].bottom=o-l[1]}));this.hasScrollTicking=false}},{key:"getRelativeOffset",value:function getRelativeOffset(t){var e=[0,0];if(t)for(var i=0;i<t.length;i++)"string"==typeof t[i]?t[i].includes("%")?e[i]=parseInt(t[i].replace("%","")*this.windowHeight/100):e[i]=parseInt(t[i]):e[i]=t[i];return e}
/**
     * Scroll to a desired target.
     *
     * @param  Available options :
     *          target {node, string, "top", "bottom", int} - The DOM element we want to scroll to
     *          options {object} - Options object for additionnal settings.
     * @return {void}
     */},{key:"scrollTo",value:function scrollTo(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var i=parseInt(e.offset)||0;var s=!!e.callback&&e.callback;if("string"===typeof t)if("top"===t)t=this.html;else if("bottom"===t)t=this.html.offsetHeight-window.innerHeight;else{t=document.querySelector(t);if(!t)return}else if("number"===typeof t)t=parseInt(t);else if(!t||!t.tagName){console.warn("`target` parameter is not valid");return}i="number"!==typeof t?t.getBoundingClientRect().top+i+this.instance.scroll.y:t+i;var n=function isTargetReached(){return parseInt(window.pageYOffset)===parseInt(i)};if(s){if(n()){s();return}var r=function onScroll(){if(n()){window.removeEventListener("scroll",onScroll);s()}};window.addEventListener("scroll",r)}window.scrollTo({top:i,behavior:0===e.duration?"auto":"smooth"})}},{key:"update",value:function update(){this.addElements();this.detectElements()}},{key:"destroy",value:function destroy(){_get(_getPrototypeOf(_default.prototype),"destroy",this).call(this);window.removeEventListener("scroll",this.checkScroll,false)}}]);return _default}(e);
/*
object-assign
(c) Sindre Sorhus
@license MIT
*/var r=Object.getOwnPropertySymbols;var o=Object.prototype.hasOwnProperty;var l=Object.prototype.propertyIsEnumerable;function toObject(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function shouldUseNative(){try{if(!Object.assign)return false;var t=new String("abc");t[5]="de";if("5"===Object.getOwnPropertyNames(t)[0])return false;var e={};for(var i=0;i<10;i++)e["_"+String.fromCharCode(i)]=i;var s=Object.getOwnPropertyNames(e).map((function(t){return e[t]}));if("0123456789"!==s.join(""))return false;var n={};"abcdefghijklmnopqrst".split("").forEach((function(t){n[t]=t}));return"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(t){return false}}var a=shouldUseNative()?Object.assign:function(t,e){var i;var s=toObject(t);var n;for(var a=1;a<arguments.length;a++){i=Object(arguments[a]);for(var c in i)o.call(i,c)&&(s[c]=i[c]);if(r){n=r(i);for(var h=0;h<n.length;h++)l.call(i,n[h])&&(s[n[h]]=i[n[h]])}}return s};function E(){}E.prototype={on:function(t,e,i){var s=this.e||(this.e={});(s[t]||(s[t]=[])).push({fn:e,ctx:i});return this},once:function(t,e,i){var s=this;function listener(){s.off(t,listener);e.apply(i,arguments)}listener._=e;return this.on(t,listener,i)},emit:function(t){var e=[].slice.call(arguments,1);var i=((this.e||(this.e={}))[t]||[]).slice();var s=0;var n=i.length;for(s;s<n;s++)i[s].fn.apply(i[s].ctx,e);return this},off:function(t,e){var i=this.e||(this.e={});var s=i[t];var n=[];if(s&&e)for(var r=0,o=s.length;r<o;r++)s[r].fn!==e&&s[r].fn._!==e&&n.push(s[r]);n.length?i[t]=n:delete i[t];return this}};var c=E;var h=createCommonjsModule((function(t,e){(function(){var t;t=null!==e?e:this;t.Lethargy=function(){function Lethargy(t,e,i,s){this.stability=null!=t?Math.abs(t):8;this.sensitivity=null!=e?1+Math.abs(e):100;this.tolerance=null!=i?1+Math.abs(i):1.1;this.delay=null!=s?s:150;this.lastUpDeltas=function(){var t,e,i;i=[];for(t=1,e=2*this.stability;1<=e?t<=e:t>=e;1<=e?t++:t--)i.push(null);return i}.call(this);this.lastDownDeltas=function(){var t,e,i;i=[];for(t=1,e=2*this.stability;1<=e?t<=e:t>=e;1<=e?t++:t--)i.push(null);return i}.call(this);this.deltasTimestamp=function(){var t,e,i;i=[];for(t=1,e=2*this.stability;1<=e?t<=e:t>=e;1<=e?t++:t--)i.push(null);return i}.call(this)}Lethargy.prototype.check=function(t){var e;t=t.originalEvent||t;null!=t.wheelDelta?e=t.wheelDelta:null!=t.deltaY?e=-40*t.deltaY:null==t.detail&&0!==t.detail||(e=-40*t.detail);this.deltasTimestamp.push(Date.now());this.deltasTimestamp.shift();if(e>0){this.lastUpDeltas.push(e);this.lastUpDeltas.shift();return this.isInertia(1)}this.lastDownDeltas.push(e);this.lastDownDeltas.shift();return this.isInertia(-1)};Lethargy.prototype.isInertia=function(t){var e,i,s,n,r,o,l;e=-1===t?this.lastDownDeltas:this.lastUpDeltas;if(null===e[0])return t;if(this.deltasTimestamp[2*this.stability-2]+this.delay>Date.now()&&e[0]===e[2*this.stability-1])return false;s=e.slice(0,this.stability);i=e.slice(this.stability,2*this.stability);l=s.reduce((function(t,e){return t+e}));r=i.reduce((function(t,e){return t+e}));o=l/s.length;n=r/i.length;return Math.abs(o)<Math.abs(n*this.tolerance)&&this.sensitivity<Math.abs(n)&&t};Lethargy.prototype.showLastUpDeltas=function(){return this.lastUpDeltas};Lethargy.prototype.showLastDownDeltas=function(){return this.lastDownDeltas};return Lethargy}()}).call(i)}));var u=function getSupport(){return{hasWheelEvent:"onwheel"in document,hasMouseWheelEvent:"onmousewheel"in document,hasTouch:"ontouchstart"in window||window.TouchEvent||window.DocumentTouch&&document instanceof DocumentTouch,hasTouchWin:navigator.msMaxTouchPoints&&navigator.msMaxTouchPoints>1,hasPointer:!!window.navigator.msPointerEnabled,hasKeyDown:"onkeydown"in document,isFirefox:navigator.userAgent.indexOf("Firefox")>-1}}();var d=Object.prototype.toString,f=Object.prototype.hasOwnProperty;var bindallStandalone=function(t){if(!t)return console.warn("bindAll requires at least one argument.");var e=Array.prototype.slice.call(arguments,1);if(0===e.length)for(var i in t)f.call(t,i)&&"function"==typeof t[i]&&"[object Function]"==d.call(t[i])&&e.push(i);for(var s=0;s<e.length;s++){var n=e[s];t[n]=bind(t[n],t)}};function bind(t,e){return function(){return t.apply(e,arguments)}}var p=h.Lethargy;var v="virtualscroll";var m=VirtualScroll;var y={LEFT:37,UP:38,RIGHT:39,DOWN:40,SPACE:32};function VirtualScroll(t){bindallStandalone(this,"_onWheel","_onMouseWheel","_onTouchStart","_onTouchMove","_onKeyDown");this.el=window;if(t&&t.el){this.el=t.el;delete t.el}this.options=a({mouseMultiplier:1,touchMultiplier:2,firefoxMultiplier:15,keyStep:120,preventTouch:false,unpreventTouchClass:"vs-touchmove-allowed",limitInertia:false,useKeyboard:true,useTouch:true},t);this.options.limitInertia&&(this._lethargy=new p);this._emitter=new c;this._event={y:0,x:0,deltaX:0,deltaY:0};this.touchStartX=null;this.touchStartY=null;this.bodyTouchAction=null;void 0!==this.options.passive&&(this.listenerOptions={passive:this.options.passive})}VirtualScroll.prototype._notify=function(t){var e=this._event;e.x+=e.deltaX;e.y+=e.deltaY;this._emitter.emit(v,{x:e.x,y:e.y,deltaX:e.deltaX,deltaY:e.deltaY,originalEvent:t})};VirtualScroll.prototype._onWheel=function(t){var e=this.options;if(!this._lethargy||false!==this._lethargy.check(t)){var i=this._event;i.deltaX=t.wheelDeltaX||-1*t.deltaX;i.deltaY=t.wheelDeltaY||-1*t.deltaY;if(u.isFirefox&&1==t.deltaMode){i.deltaX*=e.firefoxMultiplier;i.deltaY*=e.firefoxMultiplier}i.deltaX*=e.mouseMultiplier;i.deltaY*=e.mouseMultiplier;this._notify(t)}};VirtualScroll.prototype._onMouseWheel=function(t){if(!this.options.limitInertia||false!==this._lethargy.check(t)){var e=this._event;e.deltaX=t.wheelDeltaX?t.wheelDeltaX:0;e.deltaY=t.wheelDeltaY?t.wheelDeltaY:t.wheelDelta;this._notify(t)}};VirtualScroll.prototype._onTouchStart=function(t){var e=t.targetTouches?t.targetTouches[0]:t;this.touchStartX=e.pageX;this.touchStartY=e.pageY};VirtualScroll.prototype._onTouchMove=function(t){var e=this.options;e.preventTouch&&!t.target.classList.contains(e.unpreventTouchClass)&&t.preventDefault();var i=this._event;var s=t.targetTouches?t.targetTouches[0]:t;i.deltaX=(s.pageX-this.touchStartX)*e.touchMultiplier;i.deltaY=(s.pageY-this.touchStartY)*e.touchMultiplier;this.touchStartX=s.pageX;this.touchStartY=s.pageY;this._notify(t)};VirtualScroll.prototype._onKeyDown=function(t){var e=this._event;e.deltaX=e.deltaY=0;var i=window.innerHeight-40;switch(t.keyCode){case y.LEFT:case y.UP:e.deltaY=this.options.keyStep;break;case y.RIGHT:case y.DOWN:e.deltaY=-this.options.keyStep;break;case t.shiftKey:e.deltaY=i;break;case y.SPACE:e.deltaY=-i;break;default:return}this._notify(t)};VirtualScroll.prototype._bind=function(){u.hasWheelEvent&&this.el.addEventListener("wheel",this._onWheel,this.listenerOptions);u.hasMouseWheelEvent&&this.el.addEventListener("mousewheel",this._onMouseWheel,this.listenerOptions);if(u.hasTouch&&this.options.useTouch){this.el.addEventListener("touchstart",this._onTouchStart,this.listenerOptions);this.el.addEventListener("touchmove",this._onTouchMove,this.listenerOptions)}if(u.hasPointer&&u.hasTouchWin){this.bodyTouchAction=document.body.style.msTouchAction;document.body.style.msTouchAction="none";this.el.addEventListener("MSPointerDown",this._onTouchStart,true);this.el.addEventListener("MSPointerMove",this._onTouchMove,true)}u.hasKeyDown&&this.options.useKeyboard&&document.addEventListener("keydown",this._onKeyDown)};VirtualScroll.prototype._unbind=function(){u.hasWheelEvent&&this.el.removeEventListener("wheel",this._onWheel);u.hasMouseWheelEvent&&this.el.removeEventListener("mousewheel",this._onMouseWheel);if(u.hasTouch){this.el.removeEventListener("touchstart",this._onTouchStart);this.el.removeEventListener("touchmove",this._onTouchMove)}if(u.hasPointer&&u.hasTouchWin){document.body.style.msTouchAction=this.bodyTouchAction;this.el.removeEventListener("MSPointerDown",this._onTouchStart,true);this.el.removeEventListener("MSPointerMove",this._onTouchMove,true)}u.hasKeyDown&&this.options.useKeyboard&&document.removeEventListener("keydown",this._onKeyDown)};VirtualScroll.prototype.on=function(t,e){this._emitter.on(v,t,e);var i=this._emitter.e;i&&i[v]&&1===i[v].length&&this._bind()};VirtualScroll.prototype.off=function(t,e){this._emitter.off(v,t,e);var i=this._emitter.e;(!i[v]||i[v].length<=0)&&this._unbind()};VirtualScroll.prototype.reset=function(){var t=this._event;t.x=0;t.y=0};VirtualScroll.prototype.destroy=function(){this._emitter.off();this._unbind()};function lerp(t,e,i){return(1-i)*t+i*e}function getTranslate(t){var e={};if(window.getComputedStyle){var i=getComputedStyle(t);var s=i.transform||i.webkitTransform||i.mozTransform;var n=s.match(/^matrix3d\((.+)\)$/);if(n){e.x=n?parseFloat(n[1].split(", ")[12]):0;e.y=n?parseFloat(n[1].split(", ")[13]):0}else{n=s.match(/^matrix\((.+)\)$/);e.x=n?parseFloat(n[1].split(", ")[4]):0;e.y=n?parseFloat(n[1].split(", ")[5]):0}return e}}
/**
 * Returns an array containing all the parent nodes of the given node
 * @param  {object} node
 * @return {array} parent nodes
 */function getParents(t){var e=[];for(;t&&t!==document;t=t.parentNode)e.push(t);return e}var g=4;var b=.001;var w=1e-7;var S=10;var T=11;var k=1/(T-1);var x="function"===typeof Float32Array;function A(t,e){return 1-3*e+3*t}function B(t,e){return 3*e-6*t}function C(t){return 3*t}function calcBezier(t,e,i){return((A(e,i)*t+B(e,i))*t+C(e))*t}function getSlope(t,e,i){return 3*A(e,i)*t*t+2*B(e,i)*t+C(e)}function binarySubdivide(t,e,i,s,n){var r,o,l=0;do{o=e+(i-e)/2;r=calcBezier(o,s,n)-t;r>0?i=o:e=o}while(Math.abs(r)>w&&++l<S);return o}function newtonRaphsonIterate(t,e,i,s){for(var n=0;n<g;++n){var r=getSlope(e,i,s);if(0===r)return e;var o=calcBezier(e,i,s)-t;e-=o/r}return e}function LinearEasing(t){return t}var _=function bezier(t,e,i,s){if(!(0<=t&&t<=1&&0<=i&&i<=1))throw new Error("bezier x values must be in [0, 1] range");if(t===e&&i===s)return LinearEasing;var n=x?new Float32Array(T):new Array(T);for(var r=0;r<T;++r)n[r]=calcBezier(r*k,t,i);function getTForX(e){var s=0;var r=1;var o=T-1;for(;r!==o&&n[r]<=e;++r)s+=k;--r;var l=(e-n[r])/(n[r+1]-n[r]);var a=s+l*k;var c=getSlope(a,t,i);return c>=b?newtonRaphsonIterate(e,a,t,i):0===c?a:binarySubdivide(e,s,s+k,t,i)}return function BezierEasing(t){return 0===t?0:1===t?1:calcBezier(getTForX(t),e,s)}};var O={LEFT:37,UP:38,RIGHT:39,DOWN:40,SPACE:32,TAB:9,PAGEUP:33,PAGEDOWN:34,HOME:36,END:35};var L=function(t){_inherits(_default,t);var e=_createSuper(_default);function _default(){var t;var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,_default);history.scrollRestoration&&(history.scrollRestoration="manual");window.scrollTo(0,0);t=e.call(this,i);t.inertia&&(t.lerp=.1*t.inertia);t.isScrolling=false;t.isDraggingScrollbar=false;t.isTicking=false;t.hasScrollTicking=false;t.parallaxElements={};t.stop=false;t.scrollbarContainer=i.scrollbarContainer;t.checkKey=t.checkKey.bind(_assertThisInitialized(t));window.addEventListener("keydown",t.checkKey,false);return t}_createClass(_default,[{key:"init",value:function init(){var t=this;this.html.classList.add(this.smoothClass);this.html.setAttribute("data-".concat(this.name,"-direction"),this.direction);this.instance=_objectSpread2({delta:{x:this.initPosition.x,y:this.initPosition.y},scroll:{x:this.initPosition.x,y:this.initPosition.y}},this.instance);this.vs=new m({el:this.scrollFromAnywhere?document:this.el,mouseMultiplier:navigator.platform.indexOf("Win")>-1?1:.4,firefoxMultiplier:this.firefoxMultiplier,touchMultiplier:this.touchMultiplier,useKeyboard:false,passive:true});this.vs.on((function(e){t.stop||t.isDraggingScrollbar||requestAnimationFrame((function(){t.updateDelta(e);t.isScrolling||t.startScrolling()}))}));this.setScrollLimit();this.initScrollBar();this.addSections();this.addElements();this.checkScroll(true);this.transformElements(true,true);_get(_getPrototypeOf(_default.prototype),"init",this).call(this)}},{key:"setScrollLimit",value:function setScrollLimit(){this.instance.limit.y=this.el.offsetHeight-this.windowHeight;if("horizontal"===this.direction){var t=0;var e=this.el.children;for(var i=0;i<e.length;i++)t+=e[i].offsetWidth;this.instance.limit.x=t-this.windowWidth}}},{key:"startScrolling",value:function startScrolling(){this.startScrollTs=Date.now();this.isScrolling=true;this.checkScroll();this.html.classList.add(this.scrollingClass)}},{key:"stopScrolling",value:function stopScrolling(){cancelAnimationFrame(this.checkScrollRaf);this.startScrollTs=void 0;if(this.scrollToRaf){cancelAnimationFrame(this.scrollToRaf);this.scrollToRaf=null}this.isScrolling=false;this.instance.scroll.y=Math.round(this.instance.scroll.y);this.html.classList.remove(this.scrollingClass)}},{key:"checkKey",value:function checkKey(t){var e=this;if(this.stop)t.keyCode==O.TAB&&requestAnimationFrame((function(){e.html.scrollTop=0;document.body.scrollTop=0;e.html.scrollLeft=0;document.body.scrollLeft=0}));else{switch(t.keyCode){case O.TAB:requestAnimationFrame((function(){e.html.scrollTop=0;document.body.scrollTop=0;e.html.scrollLeft=0;document.body.scrollLeft=0;e.scrollTo(document.activeElement,{offset:-window.innerHeight/2})}));break;case O.UP:this.isActiveElementScrollSensitive()&&(this.instance.delta[this.directionAxis]-=240);break;case O.DOWN:this.isActiveElementScrollSensitive()&&(this.instance.delta[this.directionAxis]+=240);break;case O.PAGEUP:this.instance.delta[this.directionAxis]-=window.innerHeight;break;case O.PAGEDOWN:this.instance.delta[this.directionAxis]+=window.innerHeight;break;case O.HOME:this.instance.delta[this.directionAxis]-=this.instance.limit[this.directionAxis];break;case O.END:this.instance.delta[this.directionAxis]+=this.instance.limit[this.directionAxis];break;case O.SPACE:this.isActiveElementScrollSensitive()&&(t.shiftKey?this.instance.delta[this.directionAxis]-=window.innerHeight:this.instance.delta[this.directionAxis]+=window.innerHeight);break;default:return}this.instance.delta[this.directionAxis]<0&&(this.instance.delta[this.directionAxis]=0);this.instance.delta[this.directionAxis]>this.instance.limit[this.directionAxis]&&(this.instance.delta[this.directionAxis]=this.instance.limit[this.directionAxis]);this.stopScrolling();this.isScrolling=true;this.checkScroll();this.html.classList.add(this.scrollingClass)}}},{key:"isActiveElementScrollSensitive",value:function isActiveElementScrollSensitive(){return!(document.activeElement instanceof HTMLInputElement)&&!(document.activeElement instanceof HTMLTextAreaElement)&&!(document.activeElement instanceof HTMLButtonElement)&&!(document.activeElement instanceof HTMLSelectElement)}},{key:"checkScroll",value:function checkScroll(){var t=this;var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(e||this.isScrolling||this.isDraggingScrollbar){if(!this.hasScrollTicking){this.checkScrollRaf=requestAnimationFrame((function(){return t.checkScroll()}));this.hasScrollTicking=true}this.updateScroll();var i=Math.abs(this.instance.delta[this.directionAxis]-this.instance.scroll[this.directionAxis]);var s=Date.now()-this.startScrollTs;!this.animatingScroll&&s>100&&(i<.5&&0!=this.instance.delta[this.directionAxis]||i<.5&&0==this.instance.delta[this.directionAxis])&&this.stopScrolling();Object.entries(this.sections).forEach((function(i){var s=_slicedToArray(i,2),n=(s[0],s[1]);if(n.persistent||t.instance.scroll[t.directionAxis]>n.offset[t.directionAxis]&&t.instance.scroll[t.directionAxis]<n.limit[t.directionAxis]){"horizontal"===t.direction?t.transform(n.el,-t.instance.scroll[t.directionAxis],0):t.transform(n.el,0,-t.instance.scroll[t.directionAxis]);if(!n.inView){n.inView=true;n.el.style.opacity=1;n.el.style.pointerEvents="all";n.el.setAttribute("data-".concat(t.name,"-section-inview"),"")}}else{if(n.inView||e){n.inView=false;n.el.style.opacity=0;n.el.style.pointerEvents="none";n.el.removeAttribute("data-".concat(t.name,"-section-inview"))}t.transform(n.el,0,0)}}));this.getDirection&&this.addDirection();if(this.getSpeed){this.addSpeed();this.speedTs=Date.now()}this.detectElements();this.transformElements();if(this.hasScrollbar){var n=this.instance.scroll[this.directionAxis]/this.instance.limit[this.directionAxis]*this.scrollBarLimit[this.directionAxis];"horizontal"===this.direction?this.transform(this.scrollbarThumb,n,0):this.transform(this.scrollbarThumb,0,n)}_get(_getPrototypeOf(_default.prototype),"checkScroll",this).call(this);this.hasScrollTicking=false}}},{key:"resize",value:function resize(){this.windowHeight=window.innerHeight;this.windowWidth=window.innerWidth;this.checkContext();this.windowMiddle={x:this.windowWidth/2,y:this.windowHeight/2};this.update()}},{key:"updateDelta",value:function updateDelta(t){var e;var i=this[this.context]&&this[this.context].gestureDirection?this[this.context].gestureDirection:this.gestureDirection;e="both"===i?t.deltaX+t.deltaY:"vertical"===i?t.deltaY:"horizontal"===i?t.deltaX:t.deltaY;this.instance.delta[this.directionAxis]-=e*this.multiplier;this.instance.delta[this.directionAxis]<0&&(this.instance.delta[this.directionAxis]=0);this.instance.delta[this.directionAxis]>this.instance.limit[this.directionAxis]&&(this.instance.delta[this.directionAxis]=this.instance.limit[this.directionAxis])}},{key:"updateScroll",value:function updateScroll(t){this.isScrolling||this.isDraggingScrollbar?this.instance.scroll[this.directionAxis]=lerp(this.instance.scroll[this.directionAxis],this.instance.delta[this.directionAxis],this.lerp):this.instance.scroll[this.directionAxis]>this.instance.limit[this.directionAxis]?this.setScroll(this.instance.scroll[this.directionAxis],this.instance.limit[this.directionAxis]):this.instance.scroll.y<0?this.setScroll(this.instance.scroll[this.directionAxis],0):this.setScroll(this.instance.scroll[this.directionAxis],this.instance.delta[this.directionAxis])}},{key:"addDirection",value:function addDirection(){this.instance.delta.y>this.instance.scroll.y?"down"!==this.instance.direction&&(this.instance.direction="down"):this.instance.delta.y<this.instance.scroll.y&&"up"!==this.instance.direction&&(this.instance.direction="up");this.instance.delta.x>this.instance.scroll.x?"right"!==this.instance.direction&&(this.instance.direction="right"):this.instance.delta.x<this.instance.scroll.x&&"left"!==this.instance.direction&&(this.instance.direction="left")}},{key:"addSpeed",value:function addSpeed(){this.instance.delta[this.directionAxis]!=this.instance.scroll[this.directionAxis]?this.instance.speed=(this.instance.delta[this.directionAxis]-this.instance.scroll[this.directionAxis])/Math.max(1,Date.now()-this.speedTs):this.instance.speed=0}},{key:"initScrollBar",value:function initScrollBar(){this.scrollbar=document.createElement("span");this.scrollbarThumb=document.createElement("span");this.scrollbar.classList.add("".concat(this.scrollbarClass));this.scrollbarThumb.classList.add("".concat(this.scrollbarClass,"_thumb"));this.scrollbar.append(this.scrollbarThumb);this.scrollbarContainer?this.scrollbarContainer.append(this.scrollbar):document.body.append(this.scrollbar);this.getScrollBar=this.getScrollBar.bind(this);this.releaseScrollBar=this.releaseScrollBar.bind(this);this.moveScrollBar=this.moveScrollBar.bind(this);this.scrollbarThumb.addEventListener("mousedown",this.getScrollBar);window.addEventListener("mouseup",this.releaseScrollBar);window.addEventListener("mousemove",this.moveScrollBar);this.hasScrollbar=false;if("horizontal"==this.direction){if(this.instance.limit.x+this.windowWidth<=this.windowWidth)return}else if(this.instance.limit.y+this.windowHeight<=this.windowHeight)return;this.hasScrollbar=true;this.scrollbarBCR=this.scrollbar.getBoundingClientRect();this.scrollbarHeight=this.scrollbarBCR.height;this.scrollbarWidth=this.scrollbarBCR.width;"horizontal"===this.direction?this.scrollbarThumb.style.width="".concat(this.scrollbarWidth*this.scrollbarWidth/(this.instance.limit.x+this.scrollbarWidth),"px"):this.scrollbarThumb.style.height="".concat(this.scrollbarHeight*this.scrollbarHeight/(this.instance.limit.y+this.scrollbarHeight),"px");this.scrollbarThumbBCR=this.scrollbarThumb.getBoundingClientRect();this.scrollBarLimit={x:this.scrollbarWidth-this.scrollbarThumbBCR.width,y:this.scrollbarHeight-this.scrollbarThumbBCR.height}}},{key:"reinitScrollBar",value:function reinitScrollBar(){this.hasScrollbar=false;if("horizontal"==this.direction){if(this.instance.limit.x+this.windowWidth<=this.windowWidth)return}else if(this.instance.limit.y+this.windowHeight<=this.windowHeight)return;this.hasScrollbar=true;this.scrollbarBCR=this.scrollbar.getBoundingClientRect();this.scrollbarHeight=this.scrollbarBCR.height;this.scrollbarWidth=this.scrollbarBCR.width;"horizontal"===this.direction?this.scrollbarThumb.style.width="".concat(this.scrollbarWidth*this.scrollbarWidth/(this.instance.limit.x+this.scrollbarWidth),"px"):this.scrollbarThumb.style.height="".concat(this.scrollbarHeight*this.scrollbarHeight/(this.instance.limit.y+this.scrollbarHeight),"px");this.scrollbarThumbBCR=this.scrollbarThumb.getBoundingClientRect();this.scrollBarLimit={x:this.scrollbarWidth-this.scrollbarThumbBCR.width,y:this.scrollbarHeight-this.scrollbarThumbBCR.height}}},{key:"destroyScrollBar",value:function destroyScrollBar(){this.scrollbarThumb.removeEventListener("mousedown",this.getScrollBar);window.removeEventListener("mouseup",this.releaseScrollBar);window.removeEventListener("mousemove",this.moveScrollBar);this.scrollbar.remove()}},{key:"getScrollBar",value:function getScrollBar(t){this.isDraggingScrollbar=true;this.checkScroll();this.html.classList.remove(this.scrollingClass);this.html.classList.add(this.draggingClass)}},{key:"releaseScrollBar",value:function releaseScrollBar(t){this.isDraggingScrollbar=false;this.isScrolling&&this.html.classList.add(this.scrollingClass);this.html.classList.remove(this.draggingClass)}},{key:"moveScrollBar",value:function moveScrollBar(t){var e=this;this.isDraggingScrollbar&&requestAnimationFrame((function(){var i=100*(t.clientX-e.scrollbarBCR.left)/e.scrollbarWidth*e.instance.limit.x/100;var s=100*(t.clientY-e.scrollbarBCR.top)/e.scrollbarHeight*e.instance.limit.y/100;s>0&&s<e.instance.limit.y&&(e.instance.delta.y=s);i>0&&i<e.instance.limit.x&&(e.instance.delta.x=i)}))}},{key:"addElements",value:function addElements(){var t=this;this.els={};this.parallaxElements={};var e=this.el.querySelectorAll("[data-".concat(this.name,"]"));e.forEach((function(e,i){var s=getParents(e);var n=Object.entries(t.sections).map((function(t){var e=_slicedToArray(t,2),i=(e[0],e[1]);return i})).find((function(t){return s.includes(t.el)}));var r=e.dataset[t.name+"Class"]||t.class;var o="string"===typeof e.dataset[t.name+"Id"]?e.dataset[t.name+"Id"]:"el"+i;var l;var a;var c=e.dataset[t.name+"Repeat"];var h=e.dataset[t.name+"Call"];var u=e.dataset[t.name+"Position"];var d=e.dataset[t.name+"Delay"];var f=e.dataset[t.name+"Direction"];var p="string"===typeof e.dataset[t.name+"Sticky"];var v=!!e.dataset[t.name+"Speed"]&&parseFloat(e.dataset[t.name+"Speed"])/10;var m="string"===typeof e.dataset[t.name+"Offset"]?e.dataset[t.name+"Offset"].split(","):t.offset;var y=e.dataset[t.name+"Target"];var g;g=void 0!==y?document.querySelector("".concat(y)):e;var b=g.getBoundingClientRect();if(null===n){l=b.top+t.instance.scroll.y-getTranslate(g).y;a=b.left+t.instance.scroll.x-getTranslate(g).x}else if(n.inView){l=b.top+t.instance.scroll.y-getTranslate(g).y;a=b.left+t.instance.scroll.x-getTranslate(g).x}else{l=b.top-getTranslate(n.el).y-getTranslate(g).y;a=b.left-getTranslate(n.el).x-getTranslate(g).x}var w=l+g.offsetHeight;var S=a+g.offsetWidth;var T={x:(S-a)/2+a,y:(w-l)/2+l};if(p){var k=e.getBoundingClientRect();var x=k.top;var _=k.left;var O={x:_-a,y:x-l};l+=window.innerHeight;a+=window.innerWidth;w=x+g.offsetHeight-e.offsetHeight-O[t.directionAxis];S=_+g.offsetWidth-e.offsetWidth-O[t.directionAxis];T={x:(S-a)/2+a,y:(w-l)/2+l}}c="false"!=c&&(void 0!=c||t.repeat);var L=[0,0];if(m)if("horizontal"===t.direction){for(var P=0;P<m.length;P++)"string"==typeof m[P]?m[P].includes("%")?L[P]=parseInt(m[P].replace("%","")*t.windowWidth/100):L[P]=parseInt(m[P]):L[P]=m[P];a+=L[0];S-=L[1]}else{for(P=0;P<m.length;P++)"string"==typeof m[P]?m[P].includes("%")?L[P]=parseInt(m[P].replace("%","")*t.windowHeight/100):L[P]=parseInt(m[P]):L[P]=m[P];l+=L[0];w-=L[1]}var D={el:e,id:o,class:r,section:n,top:l,middle:T,bottom:w,left:a,right:S,offset:m,progress:0,repeat:c,inView:false,call:h,speed:v,delay:d,position:u,target:g,direction:f,sticky:p};t.els[o]=D;e.classList.contains(r)&&t.setInView(t.els[o],o);(false!==v||p)&&(t.parallaxElements[o]=D)}))}},{key:"addSections",value:function addSections(){var t=this;this.sections={};var e=this.el.querySelectorAll("[data-".concat(this.name,"-section]"));0===e.length&&(e=[this.el]);e.forEach((function(e,i){var s="string"===typeof e.dataset[t.name+"Id"]?e.dataset[t.name+"Id"]:"section"+i;var n=e.getBoundingClientRect();var r={x:n.left-1.5*window.innerWidth-getTranslate(e).x,y:n.top-1.5*window.innerHeight-getTranslate(e).y};var o={x:r.x+n.width+2*window.innerWidth,y:r.y+n.height+2*window.innerHeight};var l="string"===typeof e.dataset[t.name+"Persistent"];e.setAttribute("data-scroll-section-id",s);var a={el:e,offset:r,limit:o,inView:false,persistent:l,id:s};t.sections[s]=a}))}},{key:"transform",value:function transform(t,e,i,s){var transform;if(s){var n=getTranslate(t);var r=lerp(n.x,e,s);var o=lerp(n.y,i,s);transform="matrix3d(1,0,0.00,0,0.00,1,0.00,0,0,0,1,0,".concat(r,",").concat(o,",0,1)")}else transform="matrix3d(1,0,0.00,0,0.00,1,0.00,0,0,0,1,0,".concat(e,",").concat(i,",0,1)");t.style.webkitTransform=transform;t.style.msTransform=transform;t.style.transform=transform}},{key:"transformElements",value:function transformElements(t){var e=this;var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];var s=this.instance.scroll.x+this.windowWidth;var n=this.instance.scroll.y+this.windowHeight;var r={x:this.instance.scroll.x+this.windowMiddle.x,y:this.instance.scroll.y+this.windowMiddle.y};Object.entries(this.parallaxElements).forEach((function(o){var l=_slicedToArray(o,2),a=(l[0],l[1]);var c=false;t&&(c=0);if(a.inView||i)switch(a.position){case"top":c=e.instance.scroll[e.directionAxis]*-a.speed;break;case"elementTop":c=(n-a.top)*-a.speed;break;case"bottom":c=(e.instance.limit[e.directionAxis]-n+e.windowHeight)*a.speed;break;case"left":c=e.instance.scroll[e.directionAxis]*-a.speed;break;case"elementLeft":c=(s-a.left)*-a.speed;break;case"right":c=(e.instance.limit[e.directionAxis]-s+e.windowHeight)*a.speed;break;default:c=(r[e.directionAxis]-a.middle[e.directionAxis])*-a.speed;break}a.sticky&&(c=a.inView?"horizontal"===e.direction?e.instance.scroll.x-a.left+window.innerWidth:e.instance.scroll.y-a.top+window.innerHeight:"horizontal"===e.direction?e.instance.scroll.x<a.left-window.innerWidth&&e.instance.scroll.x<a.left-window.innerWidth/2?0:e.instance.scroll.x>a.right&&e.instance.scroll.x>a.right+100&&a.right-a.left+window.innerWidth:e.instance.scroll.y<a.top-window.innerHeight&&e.instance.scroll.y<a.top-window.innerHeight/2?0:e.instance.scroll.y>a.bottom&&e.instance.scroll.y>a.bottom+100&&a.bottom-a.top+window.innerHeight);false!==c&&("horizontal"===a.direction||"horizontal"===e.direction&&"vertical"!==a.direction?e.transform(a.el,c,0,!t&&a.delay):e.transform(a.el,0,c,!t&&a.delay))}))}
/**
     * Scroll to a desired target.
     *
     * @param  Available options :
     *          target {node, string, "top", "bottom", int} - The DOM element we want to scroll to
     *          options {object} - Options object for additionnal settings.
     * @return {void}
     */},{key:"scrollTo",value:function scrollTo(t){var e=this;var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};var s=parseInt(i.offset)||0;var n=isNaN(parseInt(i.duration))?1e3:parseInt(i.duration);var r=i.easing||[.25,0,.35,1];var o=!!i.disableLerp;var l=!!i.callback&&i.callback;r=_.apply(void 0,_toConsumableArray(r));if("string"===typeof t)if("top"===t)t=0;else if("bottom"===t)t=this.instance.limit.y;else if("left"===t)t=0;else if("right"===t)t=this.instance.limit.x;else{t=document.querySelector(t);if(!t)return}else if("number"===typeof t)t=parseInt(t);else if(!t||!t.tagName){console.warn("`target` parameter is not valid");return}if("number"!==typeof t){var a=getParents(t).includes(this.el);if(!a)return;var c=t.getBoundingClientRect();var h=c.top;var u=c.left;var d=getParents(t);var f=d.find((function(t){return Object.entries(e.sections).map((function(t){var e=_slicedToArray(t,2),i=(e[0],e[1]);return i})).find((function(e){return e.el==t}))}));var p=0;p=f?getTranslate(f)[this.directionAxis]:-this.instance.scroll[this.directionAxis];s="horizontal"===this.direction?u+s-p:h+s-p}else s=t+s;var v=parseFloat(this.instance.delta[this.directionAxis]);var m=Math.max(0,Math.min(s,this.instance.limit[this.directionAxis]));var y=m-v;var g=function render(t){o?"horizontal"===e.direction?e.setScroll(v+y*t,e.instance.delta.y):e.setScroll(e.instance.delta.x,v+y*t):e.instance.delta[e.directionAxis]=v+y*t};this.animatingScroll=true;this.stopScrolling();this.startScrolling();var b=Date.now();var w=function loop(){var t=(Date.now()-b)/n;if(t>1){g(1);e.animatingScroll=false;0==n&&e.update();l&&l()}else{e.scrollToRaf=requestAnimationFrame(loop);g(r(t))}};w()}},{key:"update",value:function update(){this.setScrollLimit();this.addSections();this.addElements();this.detectElements();this.updateScroll();this.transformElements(true);this.reinitScrollBar();this.checkScroll(true)}},{key:"startScroll",value:function startScroll(){this.stop=false}},{key:"stopScroll",value:function stopScroll(){this.stop=true}},{key:"setScroll",value:function setScroll(t,e){this.instance=_objectSpread2(_objectSpread2({},this.instance),{},{scroll:{x:t,y:e},delta:{x:t,y:e},speed:0})}},{key:"destroy",value:function destroy(){_get(_getPrototypeOf(_default.prototype),"destroy",this).call(this);this.stopScrolling();this.html.classList.remove(this.smoothClass);this.vs.destroy();this.destroyScrollBar();window.removeEventListener("keydown",this.checkKey,false)}}]);return _default}(e);var P=function(){function Smooth(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,Smooth);this.options=e;Object.assign(this,t,e);this.smartphone=t.smartphone;e.smartphone&&Object.assign(this.smartphone,e.smartphone);this.tablet=t.tablet;e.tablet&&Object.assign(this.tablet,e.tablet);this.smooth||"horizontal"!=this.direction||console.warn(" `smooth:false` & `horizontal` direction are not yet compatible");this.tablet.smooth||"horizontal"!=this.tablet.direction||console.warn(" `smooth:false` & `horizontal` direction are not yet compatible (tablet)");this.smartphone.smooth||"horizontal"!=this.smartphone.direction||console.warn(" `smooth:false` & `horizontal` direction are not yet compatible (smartphone)");this.init()}_createClass(Smooth,[{key:"init",value:function init(){this.options.isMobile=/Android|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1||window.innerWidth<this.tablet.breakpoint;this.options.isTablet=this.options.isMobile&&window.innerWidth>=this.tablet.breakpoint;this.smooth&&!this.options.isMobile||this.tablet.smooth&&this.options.isTablet||this.smartphone.smooth&&this.options.isMobile&&!this.options.isTablet?this.scroll=new L(this.options):this.scroll=new n(this.options);this.scroll.init();if(window.location.hash){var t=window.location.hash.slice(1,window.location.hash.length);var e=document.getElementById(t);e&&this.scroll.scrollTo(e)}}},{key:"update",value:function update(){this.scroll.update()}},{key:"start",value:function start(){this.scroll.startScroll()}},{key:"stop",value:function stop(){this.scroll.stopScroll()}},{key:"scrollTo",value:function scrollTo(t,e){this.scroll.scrollTo(t,e)}},{key:"setScroll",value:function setScroll(t,e){this.scroll.setScroll(t,e)}},{key:"on",value:function on(t,e){this.scroll.setEvents(t,e)}},{key:"off",value:function off(t,e){this.scroll.unsetEvents(t,e)}},{key:"destroy",value:function destroy(){this.scroll.destroy()}}]);return Smooth}();var D=function(){function Native(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};_classCallCheck(this,Native);this.options=e;Object.assign(this,t,e);this.smartphone=t.smartphone;e.smartphone&&Object.assign(this.smartphone,e.smartphone);this.tablet=t.tablet;e.tablet&&Object.assign(this.tablet,e.tablet);this.init()}_createClass(Native,[{key:"init",value:function init(){this.scroll=new n(this.options);this.scroll.init();if(window.location.hash){var t=window.location.hash.slice(1,window.location.hash.length);var e=document.getElementById(t);e&&this.scroll.scrollTo(e)}}},{key:"update",value:function update(){this.scroll.update()}},{key:"start",value:function start(){this.scroll.startScroll()}},{key:"stop",value:function stop(){this.scroll.stopScroll()}},{key:"scrollTo",value:function scrollTo(t,e){this.scroll.scrollTo(t,e)}},{key:"setScroll",value:function setScroll(t,e){this.scroll.setScroll(t,e)}},{key:"on",value:function on(t,e){this.scroll.setEvents(t,e)}},{key:"off",value:function off(t,e){this.scroll.unsetEvents(t,e)}},{key:"destroy",value:function destroy(){this.scroll.destroy()}}]);return Native}();export{D as Native,P as Smooth,P as default};

